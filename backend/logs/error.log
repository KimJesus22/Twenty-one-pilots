2025-09-19 17:06:06 [ERROR]: Error obteniendo √°lbumes: Album.paginate is not a function
TypeError: Album.paginate is not a function
    at getAlbums (C:\Users\gomez\Documents\TOP\backend\controllers\discographyController.js:28:34)
    at Layer.handleRequest (C:\Users\gomez\Documents\TOP\backend\node_modules\router\lib\layer.js:152:17)
    at next (C:\Users\gomez\Documents\TOP\backend\node_modules\router\lib\route.js:157:13)
    at middleware (C:\Users\gomez\Documents\TOP\backend\node_modules\express-validator\lib\middlewares\check.js:16:13)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
2025-09-19 17:06:06 [ERROR]: Error obteniendo √°lbumes: Album.paginate is not a function
TypeError: Album.paginate is not a function
    at getAlbums (C:\Users\gomez\Documents\TOP\backend\controllers\discographyController.js:28:34)
    at Layer.handleRequest (C:\Users\gomez\Documents\TOP\backend\node_modules\router\lib\layer.js:152:17)
    at next (C:\Users\gomez\Documents\TOP\backend\node_modules\router\lib\route.js:157:13)
    at middleware (C:\Users\gomez\Documents\TOP\backend\node_modules\express-validator\lib\middlewares\check.js:16:13)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
2025-09-19 17:06:12 [ERROR]: Error en sanitizaci√≥n de entrada: obj.hasOwnProperty is not a function
TypeError: obj.hasOwnProperty is not a function
    at sanitizeObject (C:\Users\gomez\Documents\TOP\backend\middleware\security.js:59:13)
    at sanitizeInput (C:\Users\gomez\Documents\TOP\backend\middleware\security.js:16:7)
    at Layer.handleRequest (C:\Users\gomez\Documents\TOP\backend\node_modules\router\lib\layer.js:152:17)
    at trimPrefix (C:\Users\gomez\Documents\TOP\backend\node_modules\router\index.js:342:13)
    at C:\Users\gomez\Documents\TOP\backend\node_modules\router\index.js:297:9
    at processParams (C:\Users\gomez\Documents\TOP\backend\node_modules\router\index.js:582:12)
    at next (C:\Users\gomez\Documents\TOP\backend\node_modules\router\index.js:291:5)
    at securityLogger (C:\Users\gomez\Documents\TOP\backend\middleware\security.js:260:3)
    at Layer.handleRequest (C:\Users\gomez\Documents\TOP\backend\node_modules\router\lib\layer.js:152:17)
    at trimPrefix (C:\Users\gomez\Documents\TOP\backend\node_modules\router\index.js:342:13)
2025-09-19 17:06:12 [ERROR]: Error en sanitizaci√≥n de entrada: obj.hasOwnProperty is not a function
TypeError: obj.hasOwnProperty is not a function
    at sanitizeObject (C:\Users\gomez\Documents\TOP\backend\middleware\security.js:59:13)
    at sanitizeInput (C:\Users\gomez\Documents\TOP\backend\middleware\security.js:16:7)
    at Layer.handleRequest (C:\Users\gomez\Documents\TOP\backend\node_modules\router\lib\layer.js:152:17)
    at trimPrefix (C:\Users\gomez\Documents\TOP\backend\node_modules\router\index.js:342:13)
    at C:\Users\gomez\Documents\TOP\backend\node_modules\router\index.js:297:9
    at processParams (C:\Users\gomez\Documents\TOP\backend\node_modules\router\index.js:582:12)
    at next (C:\Users\gomez\Documents\TOP\backend\node_modules\router\index.js:291:5)
    at securityLogger (C:\Users\gomez\Documents\TOP\backend\middleware\security.js:260:3)
    at Layer.handleRequest (C:\Users\gomez\Documents\TOP\backend\node_modules\router\lib\layer.js:152:17)
    at trimPrefix (C:\Users\gomez\Documents\TOP\backend\node_modules\router\index.js:342:13)
2025-09-19 18:05:09 [ERROR]: Error en ruta /concerts/search: Converting circular structure to JSON
    --> starting at object with constructor 'ClientRequest'
    |     property 'res' -> object with constructor 'IncomingMessage'
    --- property 'req' closes the circle
TypeError: Converting circular structure to JSON
    --> starting at object with constructor 'ClientRequest'
    |     property 'res' -> object with constructor 'IncomingMessage'
    --- property 'req' closes the circle
    at JSON.stringify (<anonymous>)
    at Printf.template (C:\Users\gomez\Documents\TOP\backend\utils\logger.js:32:25)
    at Printf.transform (C:\Users\gomez\Documents\TOP\backend\node_modules\logform\printf.js:11:26)
    at Format.transform (C:\Users\gomez\Documents\TOP\backend\node_modules\logform\combine.js:20:24)
    at DerivedLogger._transform (C:\Users\gomez\Documents\TOP\backend\node_modules\winston\lib\winston\logger.js:314:29)
    at Transform._read (C:\Users\gomez\Documents\TOP\backend\node_modules\readable-stream\lib\_stream_transform.js:166:10)
    at Transform._write (C:\Users\gomez\Documents\TOP\backend\node_modules\readable-stream\lib\_stream_transform.js:155:83)
    at doWrite (C:\Users\gomez\Documents\TOP\backend\node_modules\readable-stream\lib\_stream_writable.js:390:139)
    at writeOrBuffer (C:\Users\gomez\Documents\TOP\backend\node_modules\readable-stream\lib\_stream_writable.js:381:5)
    at Writable.write (C:\Users\gomez\Documents\TOP\backend\node_modules\readable-stream\lib\_stream_writable.js:302:11)
2025-09-19 18:05:09 [ERROR]: Error en ruta /concerts/search: Converting circular structure to JSON
    --> starting at object with constructor 'ClientRequest'
    |     property 'res' -> object with constructor 'IncomingMessage'
    --- property 'req' closes the circle
TypeError: Converting circular structure to JSON
    --> starting at object with constructor 'ClientRequest'
    |     property 'res' -> object with constructor 'IncomingMessage'
    --- property 'req' closes the circle
    at JSON.stringify (<anonymous>)
    at Printf.template (C:\Users\gomez\Documents\TOP\backend\utils\logger.js:32:25)
    at Printf.transform (C:\Users\gomez\Documents\TOP\backend\node_modules\logform\printf.js:11:26)
    at Format.transform (C:\Users\gomez\Documents\TOP\backend\node_modules\logform\combine.js:20:24)
    at DerivedLogger._transform (C:\Users\gomez\Documents\TOP\backend\node_modules\winston\lib\winston\logger.js:314:29)
    at Transform._read (C:\Users\gomez\Documents\TOP\backend\node_modules\readable-stream\lib\_stream_transform.js:166:10)
    at Transform._write (C:\Users\gomez\Documents\TOP\backend\node_modules\readable-stream\lib\_stream_transform.js:155:83)
    at doWrite (C:\Users\gomez\Documents\TOP\backend\node_modules\readable-stream\lib\_stream_writable.js:390:139)
    at writeOrBuffer (C:\Users\gomez\Documents\TOP\backend\node_modules\readable-stream\lib\_stream_writable.js:381:5)
    at Writable.write (C:\Users\gomez\Documents\TOP\backend\node_modules\readable-stream\lib\_stream_writable.js:302:11)
2025-09-19 19:07:02 [ERROR]: ‚ùå Error en servidor HTTPS:
2025-09-19 19:40:24 [ERROR]: ‚ùå Error: Puerto 5000 ya est√° en uso
2025-09-19 19:41:00 [ERROR]: ‚ùå Error: Puerto 5000 ya est√° en uso
2025-09-19 19:42:05 [ERROR]: ‚ùå Error: Puerto 5000 ya est√° en uso
2025-09-19 19:42:45 [ERROR]: ‚ùå Error: Puerto 5000 ya est√° en uso
2025-09-19 19:46:32 [ERROR]: ‚ùå Error: Puerto 5000 ya est√° en uso
2025-09-19 21:03:44 [31m[31merror[31m[39m: [31m[31mError no manejado[31m[39m {
  "error": "Not allowed by CORS",
  "stack": "Error: Not allowed by CORS\n    at origin (C:\\Users\\gomez\\Documents\\TOP\\backend\\app.js:90:16)\n    at C:\\Users\\gomez\\Documents\\TOP\\backend\\node_modules\\cors\\lib\\index.js:219:13\n    at optionsCallback (C:\\Users\\gomez\\Documents\\TOP\\backend\\node_modules\\cors\\lib\\index.js:199:9)\n    at corsMiddleware (C:\\Users\\gomez\\Documents\\TOP\\backend\\node_modules\\cors\\lib\\index.js:204:7)\n    at Layer.handleRequest (C:\\Users\\gomez\\Documents\\TOP\\backend\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (C:\\Users\\gomez\\Documents\\TOP\\backend\\node_modules\\router\\index.js:342:13)\n    at C:\\Users\\gomez\\Documents\\TOP\\backend\\node_modules\\router\\index.js:297:9\n    at processParams (C:\\Users\\gomez\\Documents\\TOP\\backend\\node_modules\\router\\index.js:582:12)\n    at next (C:\\Users\\gomez\\Documents\\TOP\\backend\\node_modules\\router\\index.js:291:5)\n    at C:\\Users\\gomez\\Documents\\TOP\\backend\\node_modules\\express-rate-limit\\dist\\index.cjs:899:7",
  "path": "/api/videos/search",
  "method": "GET",
  "ip": "::ffff:127.0.0.1"
}
2025-09-19 21:03:44 [31m[31merror[31m[39m: [31m[31mError no manejado[31m[39m {
  "error": "Not allowed by CORS",
  "stack": "Error: Not allowed by CORS\n    at origin (C:\\Users\\gomez\\Documents\\TOP\\backend\\app.js:90:16)\n    at C:\\Users\\gomez\\Documents\\TOP\\backend\\node_modules\\cors\\lib\\index.js:219:13\n    at optionsCallback (C:\\Users\\gomez\\Documents\\TOP\\backend\\node_modules\\cors\\lib\\index.js:199:9)\n    at corsMiddleware (C:\\Users\\gomez\\Documents\\TOP\\backend\\node_modules\\cors\\lib\\index.js:204:7)\n    at Layer.handleRequest (C:\\Users\\gomez\\Documents\\TOP\\backend\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (C:\\Users\\gomez\\Documents\\TOP\\backend\\node_modules\\router\\index.js:342:13)\n    at C:\\Users\\gomez\\Documents\\TOP\\backend\\node_modules\\router\\index.js:297:9\n    at processParams (C:\\Users\\gomez\\Documents\\TOP\\backend\\node_modules\\router\\index.js:582:12)\n    at next (C:\\Users\\gomez\\Documents\\TOP\\backend\\node_modules\\router\\index.js:291:5)\n    at C:\\Users\\gomez\\Documents\\TOP\\backend\\node_modules\\express-rate-limit\\dist\\index.cjs:899:7",
  "path": "/api/videos/search",
  "method": "GET",
  "ip": "::ffff:127.0.0.1"
}
2025-09-19 21:03:50 [31m[31merror[31m[39m: [31m[31mError no manejado[31m[39m {
  "error": "Not allowed by CORS",
  "stack": "Error: Not allowed by CORS\n    at origin (C:\\Users\\gomez\\Documents\\TOP\\backend\\app.js:90:16)\n    at C:\\Users\\gomez\\Documents\\TOP\\backend\\node_modules\\cors\\lib\\index.js:219:13\n    at optionsCallback (C:\\Users\\gomez\\Documents\\TOP\\backend\\node_modules\\cors\\lib\\index.js:199:9)\n    at corsMiddleware (C:\\Users\\gomez\\Documents\\TOP\\backend\\node_modules\\cors\\lib\\index.js:204:7)\n    at Layer.handleRequest (C:\\Users\\gomez\\Documents\\TOP\\backend\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (C:\\Users\\gomez\\Documents\\TOP\\backend\\node_modules\\router\\index.js:342:13)\n    at C:\\Users\\gomez\\Documents\\TOP\\backend\\node_modules\\router\\index.js:297:9\n    at processParams (C:\\Users\\gomez\\Documents\\TOP\\backend\\node_modules\\router\\index.js:582:12)\n    at next (C:\\Users\\gomez\\Documents\\TOP\\backend\\node_modules\\router\\index.js:291:5)\n    at C:\\Users\\gomez\\Documents\\TOP\\backend\\node_modules\\express-rate-limit\\dist\\index.cjs:899:7",
  "path": "/api/videos/search",
  "method": "GET",
  "ip": "::ffff:127.0.0.1"
}
2025-09-19 21:03:51 [31m[31merror[31m[39m: [31m[31mError no manejado[31m[39m {
  "error": "Not allowed by CORS",
  "stack": "Error: Not allowed by CORS\n    at origin (C:\\Users\\gomez\\Documents\\TOP\\backend\\app.js:90:16)\n    at C:\\Users\\gomez\\Documents\\TOP\\backend\\node_modules\\cors\\lib\\index.js:219:13\n    at optionsCallback (C:\\Users\\gomez\\Documents\\TOP\\backend\\node_modules\\cors\\lib\\index.js:199:9)\n    at corsMiddleware (C:\\Users\\gomez\\Documents\\TOP\\backend\\node_modules\\cors\\lib\\index.js:204:7)\n    at Layer.handleRequest (C:\\Users\\gomez\\Documents\\TOP\\backend\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (C:\\Users\\gomez\\Documents\\TOP\\backend\\node_modules\\router\\index.js:342:13)\n    at C:\\Users\\gomez\\Documents\\TOP\\backend\\node_modules\\router\\index.js:297:9\n    at processParams (C:\\Users\\gomez\\Documents\\TOP\\backend\\node_modules\\router\\index.js:582:12)\n    at next (C:\\Users\\gomez\\Documents\\TOP\\backend\\node_modules\\router\\index.js:291:5)\n    at C:\\Users\\gomez\\Documents\\TOP\\backend\\node_modules\\express-rate-limit\\dist\\index.cjs:899:7",
  "path": "/api/videos/search",
  "method": "GET",
  "ip": "::ffff:127.0.0.1"
}
2025-09-19 21:03:51 [31m[31merror[31m[39m: [31m[31mError no manejado[31m[39m {
  "error": "Not allowed by CORS",
  "stack": "Error: Not allowed by CORS\n    at origin (C:\\Users\\gomez\\Documents\\TOP\\backend\\app.js:90:16)\n    at C:\\Users\\gomez\\Documents\\TOP\\backend\\node_modules\\cors\\lib\\index.js:219:13\n    at optionsCallback (C:\\Users\\gomez\\Documents\\TOP\\backend\\node_modules\\cors\\lib\\index.js:199:9)\n    at corsMiddleware (C:\\Users\\gomez\\Documents\\TOP\\backend\\node_modules\\cors\\lib\\index.js:204:7)\n    at Layer.handleRequest (C:\\Users\\gomez\\Documents\\TOP\\backend\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (C:\\Users\\gomez\\Documents\\TOP\\backend\\node_modules\\router\\index.js:342:13)\n    at C:\\Users\\gomez\\Documents\\TOP\\backend\\node_modules\\router\\index.js:297:9\n    at processParams (C:\\Users\\gomez\\Documents\\TOP\\backend\\node_modules\\router\\index.js:582:12)\n    at next (C:\\Users\\gomez\\Documents\\TOP\\backend\\node_modules\\router\\index.js:291:5)\n    at C:\\Users\\gomez\\Documents\\TOP\\backend\\node_modules\\express-rate-limit\\dist\\index.cjs:899:7",
  "path": "/api/videos/search",
  "method": "GET",
  "ip": "::ffff:127.0.0.1"
}
2025-09-20 11:30:12 [31m[31merror[31m[39m: [31m[31m‚ùå Error obteniendo detalles del video[31m[39m {
  "videoId": "popular",
  "error": "ID de video inv√°lido",
  "duration": 1
}
2025-09-20 11:30:23 [31m[31merror[31m[39m: [31m[31m‚ùå Error obteniendo detalles del video[31m[39m {
  "videoId": "popular",
  "error": "ID de video inv√°lido",
  "duration": 1
}
2025-09-20 11:30:24 [31m[31merror[31m[39m: [31m[31m‚ùå Error obteniendo detalles del video[31m[39m {
  "videoId": "popular",
  "error": "ID de video inv√°lido",
  "duration": 0
}
2025-09-20 11:31:21 [31m[31merror[31m[39m: [31m[31m‚ùå Error obteniendo detalles del video[31m[39m {
  "videoId": "popular",
  "error": "ID de video inv√°lido",
  "duration": 0
}
2025-09-20 11:31:22 [31m[31merror[31m[39m: [31m[31m‚ùå Error obteniendo detalles del video[31m[39m {
  "videoId": "popular",
  "error": "ID de video inv√°lido",
  "duration": 0
}
2025-09-20 11:37:55 [31m[31merror[31m[39m: [31m[31m‚ùå DIAGN√ìSTICO: Se est√° llamando getVideoDetails con "popular" en lugar de getPopularVideos[31m[39m {
  "videoId": "popular",
  "stack": "Error\n    at getVideoDetails (c:\\Users\\gomez\\Documents\\TOP\\backend\\controllers\\videoController.js:62:16)\n    at Layer.handleRequest (c:\\Users\\gomez\\Documents\\TOP\\backend\\node_modules\\router\\lib\\layer.js:152:17)\n    at next (c:\\Users\\gomez\\Documents\\TOP\\backend\\node_modules\\router\\lib\\route.js:157:13)\n    at middleware (c:\\Users\\gomez\\Documents\\TOP\\backend\\node_modules\\express-validator\\lib\\middlewares\\check.js:16:13)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)"
}
2025-09-20 11:37:55 [31m[31merror[31m[39m: [31m[31m‚ùå Error obteniendo detalles del video[31m[39m {
  "videoId": "popular",
  "error": "ID de video inv√°lido",
  "duration": 1
}
2025-09-20 11:38:51 [31m[31merror[31m[39m: [31m[31m‚ùå DIAGN√ìSTICO: Se est√° llamando getVideoDetails con "popular" en lugar de getPopularVideos[31m[39m {
  "videoId": "popular",
  "stack": "Error\n    at getVideoDetails (c:\\Users\\gomez\\Documents\\TOP\\backend\\controllers\\videoController.js:62:16)\n    at Layer.handleRequest (c:\\Users\\gomez\\Documents\\TOP\\backend\\node_modules\\router\\lib\\layer.js:152:17)\n    at next (c:\\Users\\gomez\\Documents\\TOP\\backend\\node_modules\\router\\lib\\route.js:157:13)\n    at middleware (c:\\Users\\gomez\\Documents\\TOP\\backend\\node_modules\\express-validator\\lib\\middlewares\\check.js:16:13)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)"
}
2025-09-20 11:38:51 [31m[31merror[31m[39m: [31m[31m‚ùå Error obteniendo detalles del video[31m[39m {
  "videoId": "popular",
  "error": "ID de video inv√°lido",
  "duration": 0
}
2025-09-20 11:42:12 [31m[31merror[31m[39m: [31m[31m‚ùå Error: Puerto 5000 ya est√° en uso[31m[39m
